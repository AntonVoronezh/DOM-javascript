<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        body {
            padding-left: 30px;
        }
        .red {
            background-color: red;
        }
        .tbl52 td {
            border: 1px solid #000000;
            width: 200px;
        }
    </style>
    <title>AntonVoronezh учеба по JavaScript DOM </title>
</head>

<body>
    <h1>AntonVoronezh учеба по JavaScript DOM</h1>
    <h2>Задачи для решения JavaScript</h2>
    <h2>Урок #4</h2>

    <h3>Задача 45. В инпут через запятую вводятся страны. По нажатию на кнопку
        сделайте так, чтобы эти страны записались в ul под инпутом (каждая страна отдельный li).</h3>

    <input type="text" class="inp45">
    <ul class="ul45"></ul>
    <button class="btn45">hhhhh</button>
    <script>
        const getInp45 = document.querySelector('.inp45');
        const getUl45 = document.querySelector('.ul45');
        const getBtn45 = document.querySelector('.btn45');

        getBtn45.addEventListener('click', func45);

        function func45() {

            const arrFromValue = getInp45.value.split(',');

            arrFromValue.map(elem => createLi45(elem));

        };

        function createLi45(argText) {

            const createLi = document.createElement('li');

            createLi.innerHTML = argText;
            getUl45.appendChild(createLi);

        };

    </script>
    <hr>

    <h3>Задача 46. В инпут вводится страна и нажимается Enter.
        По нажатию на Enter сделайте так, чтобы введенные страны записывались в абзац
        под инпутом через запятую. То есть по каждому нажатию Enter в абзац будут добавляться
        все новые и новые страны</h3>
    <input type="text" class="inp46">
    <p class="p46"></p>
    <script>
        const getInp46 = document.querySelector('.inp46');
        const getP46 = document.querySelector('.p46');

        document.addEventListener('keypress', func46);

        function func46(event) {

            if (event.keyCode === 13) {
                getP46.innerHTML = getP46.innerHTML + ', ' + getInp46.value;
                getInp46.value = '';
            }

        };

    </script>
    <hr>

    <h3>Задача 47. На странице есть дивы. В них есть текст. Обойдите все дивы и
        обрежьте тот текст, который в них стоит так, чтобы он стал длиной 10
        символов. И добавьте троеточие в конец обрезанного текста</h3>
    <section class="s47">
        <div class="div47">Lorem ipsum adipisicing elit. .</div>
        <div class="div47">Corporis , facere laudantium quaerat</div>
        <div class="div47">ullam necessitatibus quo officiis incidunt numquam</div>
        <div class="div47">totam quae dolor sit amet consectetur</div>
    </section>
    <script>
        const getS47 = document.querySelector('.s47');
        const getAllDiv47 = getS47.querySelectorAll('.div47');

        getS47.addEventListener('click', func47);

        function func47() {

            getAllDiv47.forEach(elem => {

                const cropElem = elem.innerHTML.substr(0, 10);

                elem.innerHTML = cropElem + '...';

            });

        };

    </script>
    <hr>

    <h3>Задача 48. Дана таблица с числами. По нажатию на кнопку найдите ячейку,
        в которой хранится максимальное число, и сделайте ее фон красным.</h3>
    <table class="tbl48">
        <tr>
            <td>1</td>
            <td>3</td>
            <td>5</td>
            <td>7</td>
        </tr>
        <tr>
            <td>8</td>
            <td>2</td>
            <td>10</td>
            <td>6</td>
        </tr>
    </table>
    <input type="submit" value="hhhhh" class="inp48">
    <script>
        const getInp48 = document.querySelector('.inp48');
        const getTbl48 = document.querySelector('.tbl48');
        const getAllTd = getTbl48.querySelectorAll('td');

        getInp48.addEventListener('click', func48);

        function func48() {

            let num = 0;
            let index = 0;

            [...getAllTd].map((elem, n) => {

                if (+elem.innerHTML > num) {

                    num = +elem.innerHTML
                    index = n;
                }

            });

            getAllTd[index].style.backgroundColor = 'red';

        };

    </script>
    <hr>

    <h3>Задача 49. Дана таблица с числами. По нажатию на кнопку в инпут под таблицей
        выведите эти числа через запятую в порядке возрастания.</h3>
    <table class="tbl49">
        <tr>
            <td>1</td>
            <td>30</td>
            <td>55</td>
            <td>7</td>
        </tr>
        <tr>
            <td>8</td>
            <td>26</td>
            <td>10</td>
            <td>6</td>
        </tr>
    </table>
    <input type="text" class="inp491">
    <input type="submit" value="hhhhh" class="inp492">

    <script>
        const getInp491 = document.querySelector('.inp491');
        const getInp492 = document.querySelector('.inp492');
        const getTbl49 = document.querySelector('.tbl49');
        const getAllTd49 = getTbl49.querySelectorAll('td');

        getInp492.addEventListener('click', func49);

        function func49() {

            const arr = [];

            getAllTd49.forEach(elem => arr.push(+elem.innerHTML));

            const arrSort = arr.sort((a, b) => a - b);

            getInp491.value = arrSort.join(', ');

        };

    </script>
    <hr>

    <h3>Задача 50. Дана таблица с числами. По нажатию на кнопку в последний ряд
        таблицы в каждую ячейку запишите сумму чисел в столбце таблицы,
        расположенном над определенной ячейкой.</h3>
    <table class="tbl50">
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
        <tr>
            <td>4</td>
            <td>5</td>
            <td>6</td>
        </tr>
        <tr>
            <td>7</td>
            <td>8</td>
            <td>9</td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <input type="submit" value="hhhhh" class="inp50">
    <script>
        const getInp50 = document.querySelector('.inp50');
        const getTbl50 = document.querySelector('.tbl50');

        getInp50.addEventListener('click', func50);

        function func50() {

            const getAllTr = getTbl50.querySelectorAll('tr');
            let obj = {};

            getAllTr.forEach((elem, num) => {

                const getAllTd = elem.querySelectorAll('td');
                let sum = 0;

                getAllTd.forEach((elem, n) => {

                    if (elem.innerHTML) {

                        if (num === 0) {
                            obj[n] = [];
                        }

                        obj[n].push(Number(elem.innerHTML));

                    } else {
                        elem.innerHTML = `<b>${getSum50(obj[n])}</b>`;
                    }
                });

            });

        };

        function getSum50(argArr) {
            let sum = 0;

            argArr.forEach(elem => {
                sum += +elem;
            });

            return sum;
        };

    </script>
    <hr>

    <h3>Задача 51. Дана таблица с числами. По нажатию на ячейку она активируется и
        становится красного цвета. Активировать можно много ячеек. Под таблицей кнопка.
        По нажатию по этой кнопке в абзац ниже выведите сумма активированных ячеек.
        Реализуйте кнопку 'сбросить активированные ячейки'.</h3>
    <table class="tbl51">
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
            <td>6</td>
        </tr>
        <tr>
            <td>7</td>
            <td>8</td>
            <td>9</td>
            <td>10</td>
            <td>11</td>
            <td>12</td>
        </tr>
        <tr>
            <td>13</td>
            <td>14</td>
            <td>15</td>
            <td>16</td>
            <td>17</td>
            <td>18</td>
        </tr>
    </table>
    <p class="p51"></p>
    <input type="submit" value="sum" class="inp511">
    <input type="submit" value="reset" class="inp512">
    <script>
        const getInpSum51 = document.querySelector('.inp511');
        const getInpReset51 = document.querySelector('.inp512');
        const getP51 = document.querySelector('.p51');
        const getTbl51 = document.querySelector('.tbl51');

        getTbl51.addEventListener('click', func51);
        getInpReset51.addEventListener('click', func52);
        getInpSum51.addEventListener('click', func53);

        function func51(event) {

            event.target.classList.add('red');

        };

        function func52() {

            const getAllTd = getTbl51.querySelectorAll('td');

            getAllTd.forEach(elem => elem.classList.remove('red'));

            getP51.innerHTML = '';

        };

        function func53() {
            // console.log(event.target.innerHTML);
            const getAllTd = getTbl51.querySelectorAll('td');
            let sum = 0;
            getAllTd.forEach(elem => {

                if (elem.classList.contains('red')) {
                    sum += +elem.innerHTML;
                }

            });

            getP51.innerHTML = '';
            getP51.innerHTML = sum;

        };

    </script>
    <hr>

    <h3>Задача 52. Дана таблица. По нажатию на ячейку в ней появляется инпут с
        содержимым этой ячейки и кнопка сохранить. Можно поредактировать
        текст в инпуте, сохранить - и текст ячейки поменяется.</h3>
    <table class="tbl52">
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>

        </tr>
        <tr>
            <td>4</td>
            <td>5</td>
            <td>6</td>
        </tr>
    </table>
    <script>
        const getTbl52 = document.querySelector('.tbl52');

        getTbl52.addEventListener('click', func52);

        function func52(event) {

            const createInput = document.createElement('input');
            createInput.value = event.target.innerHTML;

            event.target.innerHTML = '';
            event.target.appendChild(createInput);

            const createInput2 = document.createElement('input');
            createInput2.type = 'submit';
            createInput2.value = 'submit';

            event.target.appendChild(createInput2);

            createInput2.addEventListener('click', () => {

                event.target.innerHTML = createInput.value;

            });

        };


    </script>
    <hr>

    <h3>Задача 53. Реализуйте раскрывающийся список. По умолчанию есть список
        стран (ul), по нажатию на страну внутри li со страной появляется список городов</h3>
    <ul class="ul53">
    </ul>
    <script>
        const obj53 = {
            'Россия': ['1', '2', '3'],
            'Германия': ['4', '5', '6'],
            'Италия': ['7', '8', '9']
        };
        const getUl53 = document.querySelector('.ul53');

        console.log(Object.keys(obj53).length);

        document.addEventListener('DOMContentLoaded', func53);

        function func53() {

            Object.keys(obj53).forEach(elem => {

                const createLi = document.createElement('li');
                createLi.innerHTML = elem;

                getUl53.appendChild(createLi);

                createLi.addEventListener('click', func532);
            });

        };

        function func532(event) {

            let result =  obj53[event.target.innerHTML].join(', ');

            event.target.innerHTML = event.target.innerHTML + ' -> ' + result
        };


    </script>



    <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
</body>

</html>