<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        body {
            padding-left: 30px;
        }

        .red {
            background-color: red;
        }

        .tbl57 td {
            border: 1px solid #000000;
            width: 100px;
            height: 50px;
        }
    </style>
    <title>AntonVoronezh учеба по JavaScript DOM </title>
</head>

<body>
    <h1>AntonVoronezh учеба по JavaScript DOM</h1>
    <h2>Задачи для решения JavaScript</h2>
    <h2>Урок #5</h2>

    <h3>Задача 54. Даны два селекта. В первом находятся страны, во втором - города.
        Сделайте так, чтобы когда выбирается определенная страна - в другом селекте
        появлялись города этой страны. В абзац ниже пишите выбранную страну и город через запятую.</h3>

    <select class="sel541">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
    <select class="sel542"></select>
    <script>
        const arr54 = {
            1: ['1-1', '1-2', '1-3', '1-4'],
            2: ['2-1', '2-2', '2-3', '2-4'],
            3: ['3-1', '3-2', '3-3', '3-4'],
            4: ['4-1', '4-2', '4-3', '4-4']
        };
        const getSel541 = document.querySelector('.sel541');
        const getSel542 = document.querySelector('.sel542');

        getSel541.addEventListener('change', func541);

        function func541(event) {

            getSel542.innerHTML = '';

            arr54[+event.target.value].forEach(element => {

                createOpt54(element);

            });

        };

        function createOpt54(argText) {

            const createOpt = document.createElement('option');

            createOpt.innerHTML = argText;
            getSel542.appendChild(createOpt);

        };

    </script>
    <hr>

    <h3>Задача 55. Сделайте селекты день, мес, год. Сделайте так, чтобы не корректную
        дату нельзя было выбрать (например, 30 февраля нельзя, а 30 марта можно или
        29 февраля можно, но только в високосный год). </h3>
    <div class="div55">
        <select class="sel551"></select>
        <select class="sel552"></select>
        <select class="sel553"></select>
    </div>

    <script>
        const getDiv55 = document.querySelector('.div55');
        const getSelY55 = document.querySelector('.sel551');
        const getSelM55 = document.querySelector('.sel552');
        const getSelD55 = document.querySelector('.sel553');

        document.addEventListener('DOMContentLoaded', funcMakeOpt55);
        getDiv55.addEventListener('change', func55);

        const date = new Date();

        function func55() {

            const getYearFromSelect = getSelectedOption55(getSelY55);
            const getMonthFromSelect = getSelectedOption55(getSelM55);
            const getDayFromSelect = getSelectedOption55(getSelD55);

            if (!checkDate(getYearFromSelect, getMonthFromSelect, getDayFromSelect)) {

                funcMakeDefault55(getSelY55, date.getFullYear());
                funcMakeDefault55(getSelM55, date.getMonth() + 1);
                funcMakeDefault55(getSelD55, date.getDate());

                const createErr = document.createElement('div');
                createErr.innerHTML = 'Не существует. Попробуйте еще раз.'

                getDiv55.appendChild(createErr);
            }

        };

        function checkDate(argYear, argMonth, argDay) {

            const date = new Date(argYear, argMonth - 1, argDay);
            return date.getFullYear() === argYear && date.getMonth() === argMonth - 1 && date.getDate() === argDay;

        };

        function getSelectedOption55(argSelect) {

            const getAll = argSelect.querySelectorAll('option');
            let out = 0;

            getAll.forEach(elem => {

                if (elem.selected) {

                    out = +elem.innerHTML;
                }

            });
            return out;
        };



  
    


    </script>
    <hr>



   




    <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
</body>

</html>