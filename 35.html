<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        body {
            padding-left: 30px;
        }

        .red {
            background-color: red;
        }

        .tbl57 td {
            border: 1px solid #000000;
            width: 100px;
            height: 50px;
        }
        .next, .prev {
            cursor: pointer;
        }
    </style>
    <title>AntonVoronezh учеба по JavaScript DOM </title>
</head>

<body>
    <h1>AntonVoronezh учеба по JavaScript DOM</h1>
    <h2>Задачи на продвинутую работу с функциями JavaScript</h2>
    <h2>На работу с функциями</h2>

    <h3>Задача 1. Если переменная a больше нуля - то в ggg запишем функцию,
        которая выводит один !, иначе запишем функцию, которая выводит два !.</h3>

    <script>
        let a = 1;

        if (a > 0) {

            console.log('!');

        } else {

            console.log('1 -> !!');

        }
    </script>
    <hr>

    <h3>Задача 2. Функция ggg принимает 2 параметра: число и анонимную функцию,
        которая возводит число в квадрат. Возведите число в 4-тую степень с помощью ggg.</h3>

    <script>

        const ggg = (argNum, funcArg) => {

            return funcArg(argNum);

        };

        console.log('2 -> ' + ggg(ggg(2, argNum => argNum * argNum), argNum => argNum * argNum));


    </script>
    <hr>

    <h3>Задача 3. Функция ggg принимает 2 параметра: анонимную функцию,
        которая возвращает 3 и анонимную функцию, которая возвращает 4.
        Верните результатом функции ggg сумму 3 и 4</h3>
    <script>

        const ggg3 = (funcArg1, funcArg2) => {

            return funcArg1() + funcArg2();

        };

        console.log('3 -> ' + ggg3(() => 3, () => 4));


    </script>
    <hr>

    <h3>Задача 4. Дана функция ggg. Она требует первым параметром число,
        вторым функцию, которая возводит в квадрат, а третьим параметром
        функцию, которая возводит в куб. Эти функции есть как Function Declaration -
        kvadrat, kub. Пусть функция ggg вернет сумму квадрата и куба числа.</h3>
    <script>

        const kvadrat = argAnum => argAnum * argAnum;

        const kub = argAnum => argAnum * argAnum * argAnum;

        const ggg4 = (argNum, argFunc1, argFunc2) => {

            return argFunc1(argNum) + argFunc2(argNum);

        };

        console.log('4 -> ' + ggg4(2, kvadrat, kub));

    </script>
    <hr>

    <h3>Задача 5. Сделайте функцию each, которая первым параметром принимает массив,
        а вторым - функцию, которая применится к каждому элементу массива. Функция
        each должна вернуть измененный массив</h3>
    <script>

        const arr5 = [1, 2, 3, 4, 5];

        const plusOne = argNum => argNum + 1;

        const ggg5 = (argArr, argFunc) => {

            return argArr.forEach((elem, num) => {
                argArr[num] = argFunc(argArr[num]);
            });

        };

        ggg5(arr5, plusOne);

        console.log('5 -> ' + arr5);

    </script>
    <hr>

    <h3>Задача 6. Сделайте функцию each, которая первым параметром принимает массив,
        а вторым - массив функций, которые по очереди применятся к каждому элементу
        массива: к первому элементу массива - первая функция, ко второму -
        вторая и так далее пока функции в массиве не закончатся, после этого
        возьмется первая функция, вторая и так далее по кругу.</h3>
    <script>

        const arr6 = [1, 2, 3, 4, 5, 6, 7];
        // console.log('6 -> ' + arr6);
        // console.log('6 -> 2-1-6-5-4-12-8');
        const arrFunc = [argNum => argNum + 1, argNum => argNum - 1, argNum => argNum * 2];

        const ggg6 = (argArrNum, argArrFunc) => {

            let count = 0;

            return argArrNum.forEach((elem, num) => {

                // console.log(count,elem, num, argArrFunc[count], argArrFunc[count](elem));

                arr6[num] = argArrFunc[count](elem);

                if (count < argArrFunc.length - 1) {

                    count += 1;

                } else {

                    count = 0;

                }

            });

        };

        ggg6(arr6, arrFunc);

        console.log('6 -> ' + arr6);

    </script>
    <hr>

    <h2>На замыкания</h2>
    <h3>Задача 7. Сделайте функцию, которая считает и выводит количество своих вызовов.</h3>
    <script>

        const funcWrap7 = () => {

            let num = 0;

            return () => num++;

        };

        const func7 = funcWrap7();

        console.log('7 -> ' + func7());
        console.log('7 -> ' + func7());
        console.log('7 -> ' + func7());

    </script>
    <hr>

    <h3>Задача 8. Даны кнопки. Привяжите к каждой кнопке событие по клику,
        которое будет считать количество нажатий по кнопке и выводить его в
        текст кнопки. Количество нажатий для каждой кнопки должно хранится в замыкании. </h3>
    <div class="div8">
        <button>0</button>
        <button>0</button>
        <button>0</button>
    </div>

    <script>
        const getDiv8 = document.querySelector('.div8');
        const getAllBtn = getDiv8.querySelectorAll('button');

        getAllBtn.forEach(elem => {

            const func8 = (function () {

                let num = 1;

                return () => num++;
            })();

            elem.addEventListener('click', function () {

                this.innerHTML = func8();

            });

        });


    </script>
    <hr>

    <h3>Задача 9. Дан массив цветов. Даны абзацы. По первому нажатию на абзац он
        должен покраситься в первый цвет из массива, по второму нажатию -
        во второй и так далее. Все абзацы работают независимо</h3>
    <div class="div9">
        <p class="p91">..........</p>
        <p class="p92">..........</p>
        <p class="p93">..........</p>
        <p class="p94">..........</p>
    </div>
    <script>
        const getDiv9 = document.querySelector('.div9');
        const getAllP = getDiv9.querySelectorAll('p');

        const arr = ['red', 'green', 'blue', 'yellow'];

        getAllP.forEach(elem => {

            const func9 = (function () {

                let num = -1;

                return () => {

                    if (num < arr.length - 1) {

                        num += 1;

                    } else {

                        num = 0;
                    }

                    return arr[num];
                };

            })();

            elem.addEventListener('click', function () {

                this.style.backgroundColor = func9();

            });

        });


    </script>
    <hr>

    <h3>Задача 10. Даны кнопки. Каждая кнопка по нажатию на нее
        выводить следующее число Фибоначчи. Кнопки работают независимо.
        Решить через замыкания. </h3>


    <div class="div10">
        <button>0</button>
        <button>0</button>
        <button>0</button>
    </div>

    <script>
        const getDiv10 = document.querySelector('.div10');
        const getAllBtn10 = getDiv10.querySelectorAll('button');

        getAllBtn10.forEach(elem => {

            const func10 = (function () {

                let num1 = 1;
                let num2 = 1;

                return () => {
                    let last = num1 + num2;
                    num1 = num2;
                    num2 = last;
                    return last;
                };
            })();

            elem.addEventListener('click', function () {

                this.innerHTML = func10();

            });

        });

    </script>
    <hr>

    <h3>Задача 11. Даны инпуты. Сделайте так, чтобы каждый инпут хранил
        историю своих изменений. Каждый инпут свою. Изменением считается
        событие onchange. История должна хранится в замыкании. Над каждым инпутом
        должны быть стрелочки назад и вперед, с помощью которых можно передвигаться по истории.</h3>

    <div class="div11">
        <span class="prev">
            <-</span> <input type="text">
                <span class="next">-></span>
                <br>
                <span class="prev">
                    <-</span> <input type="text">
                        <span class="next">-></span>
                        <br>
                        <span class="prev">
                            <-</span> <input type="text">
                                <span class="next">-></span>
    </div>

    <script>
        const getDiv11 = document.querySelector('.div11');
        const getAllInput11 = getDiv11.querySelectorAll('input');

        getAllInput11.forEach(elem => {

            const func11 = (function () {

                const arr11 = [];
                // const arr11 = ['1=', '2=', '3=', '4=', '5=', '6=', '7='];

                return (arg) => {

                    arr11.push(arg);
                    console.log(arr11);
                    return arr11;

                };

            })();

            const func11Index = (function () {

                let num = 0;

                let count = func11(this.value).length - 1;

                return (argFrom) => {


                    if (argFrom === 'left') {
                        if (num === 0) {
                            num = count - 1;
                        } else {
                            num -= 1;
                        }
                        return num;

                    }
                    if (argFrom === 'right') {
                        if (num === 0) {
                            num = count + 1;
                        } else {
                            num += 1;
                        }
                        return num;
                    }

                };
            })();

            elem.addEventListener('change', function () {

                const getArrResult = func11(this.value);

                elem.previousElementSibling.addEventListener('click', function () {

                    const getIndex = func11Index('left');

                    elem.value = getArrResult[getIndex];

                });


                elem.nextElementSibling.addEventListener('click', function () {

                    const getIndex = func11Index('right');

                    elem.value = getArrResult[getIndex];


                });

            });


        });

    </script>
    <hr>






    <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
</body>

</html>